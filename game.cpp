#include<bits/stdc++.h>
#include<conio.h>
#include<ctime>
#include<windows.h>
#include "snake.cpp"
#include "food.cpp"
using namespace std;

#define LENGTH 30
#define WIDTH 30

snake s({LENGTH / 2, WIDTH / 2}, 1);
food f;

class Grid
{
private:
    int length, breadth;

public:
    COORD snake_pos = s.get_pos();
    Grid(int len, int bre,int p) : length(len), breadth(bre) {
        node* snake_body = s.get_body();
        for (int i = 0; i < length; i++) {
            for (int j = 0; j < breadth; j++) {
                if (i == 0 || i == length - 1 || j == 0 || j == breadth - 1) {
                    cout << "ðŸŒ³";
                }
                else if (i == f.get_pos().Y && j == f.get_pos().X) {
                    cout << f.v[f.K];
                }
                else {
                    bool is_snake = false;
                    node* temp = snake_body;
                    while (temp) {
                        if (i == temp->pos.Y && j == temp->pos.X) {
                            cout << s.colour[p-1];
                            is_snake = true;
                            break;
                        }
                        temp = temp->next;
                    }
                    if (!is_snake) {
                        cout << "  ";
                    }
                }
            }
            cout << endl;
        }
    }
};

void hideCursor() {
    HANDLE consoleHandle = GetStdHandle(STD_OUTPUT_HANDLE);
    CONSOLE_CURSOR_INFO cursorInfo;
    GetConsoleCursorInfo(consoleHandle, &cursorInfo);
    cursorInfo.bVisible = false;
    SetConsoleCursorInfo(consoleHandle, &cursorInfo);
}

void tutorial()
{
    cout << R"(â€‹ðŸ‡¹â€‹â€‹ðŸ‡­â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡¸â€‹â€‹ðŸ‡³â€‹â€‹ðŸ‡¦â€‹â€‹ðŸ‡°â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡¬â€‹â€‹ðŸ‡¦â€‹â€‹ðŸ‡²â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡®â€‹â€‹ðŸ‡¸â€‹ â€‹ðŸ‡¦â€‹ â€‹ðŸ‡¸â€‹â€‹ðŸ‡®â€‹â€‹ðŸ‡²â€‹â€‹ðŸ‡µâ€‹â€‹ðŸ‡±â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡¬â€‹â€‹ðŸ‡¦â€‹â€‹ðŸ‡²â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡®â€‹â€‹ðŸ‡³â€‹ â€‹ðŸ‡¼â€‹â€‹ðŸ‡­â€‹â€‹ðŸ‡®â€‹â€‹ðŸ‡¨â€‹â€‹ðŸ‡­â€‹ â€‹ðŸ‡¾â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡ºâ€‹ â€‹ðŸ‡«â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡©â€‹ â€‹ðŸ‡¸â€‹â€‹ðŸ‡³â€‹â€‹ðŸ‡¦â€‹â€‹ðŸ‡°â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡¹â€‹â€‹ðŸ‡´â€‹ â€‹ðŸ‡²â€‹â€‹ðŸ‡¦â€‹â€‹ðŸ‡°â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡®â€‹â€‹ðŸ‡¹â€‹ â€‹ðŸ‡¬â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡¼â€‹, â€‹ðŸ‡¸â€‹â€‹ðŸ‡¨â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡®â€‹â€‹ðŸ‡³â€‹â€‹ðŸ‡¬â€‹ â€‹ðŸ‡µâ€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡®â€‹â€‹ðŸ‡³â€‹â€‹ðŸ‡¹â€‹â€‹ðŸ‡¸â€‹.
    â€‹ðŸ‡©â€‹â€‹ðŸ‡®â€‹â€‹ðŸ‡«â€‹â€‹ðŸ‡«â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡³â€‹â€‹ðŸ‡¹â€‹ â€‹ðŸ‡«â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡©â€‹â€‹ðŸ‡¸â€‹ â€‹ðŸ‡­â€‹â€‹ðŸ‡¦â€‹â€‹ðŸ‡»â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡©â€‹â€‹ðŸ‡®â€‹â€‹ðŸ‡«â€‹â€‹ðŸ‡«â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡³â€‹â€‹ðŸ‡¹â€‹ â€‹ðŸ‡¸â€‹â€‹ðŸ‡¨â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡¸â€‹ â€‹ðŸ‡¹â€‹â€‹ðŸ‡´â€‹ â€‹ðŸ‡¹â€‹â€‹ðŸ‡­â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡²â€‹.
    â€‹ðŸ‡µâ€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡¸â€‹â€‹ðŸ‡¸â€‹ ( â€‹ðŸ‡¦â€‹ / â€‹ðŸ‡±â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡«â€‹â€‹ðŸ‡¹â€‹ â€‹ðŸ‡¦â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡¼â€‹ ) â€‹ðŸ‡¹â€‹â€‹ðŸ‡´â€‹ â€‹ðŸ‡²â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡»â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡±â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡«â€‹â€‹ðŸ‡¹â€‹
    â€‹ðŸ‡µâ€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡¸â€‹â€‹ðŸ‡¸â€‹ ( â€‹ðŸ‡¸â€‹ / â€‹ðŸ‡©â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡¼â€‹â€‹ðŸ‡³â€‹ â€‹ðŸ‡¦â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡¼â€‹ ) â€‹ðŸ‡¹â€‹â€‹ðŸ‡´â€‹ â€‹ðŸ‡²â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡»â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡©â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡¼â€‹â€‹ðŸ‡³â€‹
    â€‹ðŸ‡µâ€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡¸â€‹â€‹ðŸ‡¸â€‹ ( â€‹ðŸ‡©â€‹ / â€‹ðŸ‡·â€‹â€‹ðŸ‡®â€‹â€‹ðŸ‡¬â€‹â€‹ðŸ‡­â€‹â€‹ðŸ‡¹â€‹ â€‹ðŸ‡¦â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡¼â€‹ ) â€‹ðŸ‡¹â€‹â€‹ðŸ‡´â€‹ â€‹ðŸ‡²â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡»â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡·â€‹â€‹ðŸ‡®â€‹â€‹ðŸ‡¬â€‹â€‹ðŸ‡­â€‹â€‹ðŸ‡¹â€‹
    â€‹ðŸ‡µâ€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡¸â€‹â€‹ðŸ‡¸â€‹ ( â€‹ðŸ‡¼â€‹ / â€‹ðŸ‡ºâ€‹â€‹ðŸ‡µâ€‹ â€‹ðŸ‡¦â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡¼â€‹ ) â€‹ðŸ‡¹â€‹â€‹ðŸ‡´â€‹ â€‹ðŸ‡²â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡»â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡ºâ€‹â€‹ðŸ‡µâ€‹

    â€‹ðŸ‡«â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡©â€‹ â¦‚
â€‹    ðŸ‡³â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡²â€‹â€‹ðŸ‡¦â€‹â€‹ðŸ‡±â€‹ â¦‚ â ðŸ‡ â , â ðŸª¿  â , â ðŸ¥š â  -- â€‹ðŸ‡¸â€‹â€‹ðŸ‡¨â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡¸â€‹ â¦‚ 1ï¸0
â€‹    ðŸ‡ªâ€‹â€‹ðŸ‡½â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡¹â€‹â€‹ðŸ‡®â€‹â€‹ðŸ‡¨ â€‹â¦‚ â ðŸ¦¢ â , â ðŸ¦© â           -- â€‹ðŸ‡¸â€‹â€‹ðŸ‡¨â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡¸â€‹ â¦‚ 2ï¸0ï¸
â€‹    ðŸ‡ºâ€‹â€‹ðŸ‡±â€‹â€‹ðŸ‡¹â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡¦â€‹ â€‹ðŸ‡ªâ€‹â€‹ðŸ‡½â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡¹â€‹â€‹ðŸ‡®â€‹â€‹ðŸ‡¨ â€‹â¦‚ â ðŸ¦š â              -- â€‹ðŸ‡¸â€‹â€‹ðŸ‡¨â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡¸â€‹ â¦‚ 3ï¸0ï¸

    â€‹ðŸ‡·â€‹â€‹ðŸ‡ºâ€‹â€‹ðŸ‡±â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡¸ â€‹â¦‚

    1ï¸âƒ£) â€‹ðŸ‡ªâ€‹â€‹ðŸ‡¦â€‹â€‹ðŸ‡¹â€‹ â€‹ðŸ‡«â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡©â€‹ â€‹ðŸ‡¹â€‹â€‹ðŸ‡´â€‹ â€‹ðŸ‡®â€‹â€‹ðŸ‡³â€‹â€‹ðŸ‡¨â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡¦â€‹â€‹ðŸ‡¸â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡±â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡³â€‹â€‹ðŸ‡¬â€‹â€‹ðŸ‡¹â€‹â€‹ðŸ‡­â€‹ â€‹ðŸ‡¦â€‹â€‹ðŸ‡³â€‹â€‹ðŸ‡©â€‹ â€‹ðŸ‡¸â€‹â€‹ðŸ‡¨â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡ªâ€‹
    2ï¸âƒ£) â€‹ðŸ‡®â€‹â€‹ðŸ‡«â€‹ â€‹ðŸ‡¸â€‹â€‹ðŸ‡³â€‹â€‹ðŸ‡¦â€‹â€‹ðŸ‡°â€‹â€‹ðŸ‡ªâ€‹âœâ€‹ðŸ‡¸â€‹ â€‹ðŸ‡­â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡¦â€‹â€‹ðŸ‡©â€‹ â€‹ðŸ‡­â€‹â€‹ðŸ‡®â€‹â€‹ðŸ‡¹â€‹â€‹ðŸ‡¸â€‹ â€‹ðŸ‡¦â€‹â€‹ðŸ‡³â€‹â€‹ðŸ‡¾â€‹ â€‹ðŸ‡¼â€‹â€‹ðŸ‡¦â€‹â€‹ðŸ‡±â€‹â€‹ðŸ‡±â€‹ â€‹ðŸ‡´â€‹â€‹ðŸ‡·â€‹ â€‹ðŸ‡®â€‹â€‹ðŸ‡¹â€‹â€‹ðŸ‡¸â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡±â€‹â€‹ðŸ‡«â€‹ â€‹ðŸ‡¹â€‹â€‹ðŸ‡­â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡¬â€‹â€‹ðŸ‡¦â€‹â€‹ðŸ‡²â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡ªðŸ‡³â€‹â€‹ðŸ‡©â€‹â€‹ðŸ‡¸â€‹

    â€‹ðŸ‡¹â€‹â€‹ðŸ‡´â€‹ â€‹ðŸ‡¨â€‹â€‹ðŸ‡´â€‹â€‹ðŸ‡³â€‹â€‹ðŸ‡¹â€‹â€‹ðŸ‡®â€‹â€‹ðŸ‡³â€‹â€‹ðŸ‡ºâ€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡¼â€‹â€‹ðŸ‡®â€‹â€‹ðŸ‡¹â€‹â€‹ðŸ‡­â€‹ â€‹ðŸ‡¬â€‹â€‹ðŸ‡¦â€‹â€‹ðŸ‡²â€‹â€‹ðŸ‡ªâ€‹ â€‹ðŸ‡µâ€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡¸â€‹â€‹ðŸ‡¸â€‹ âœâ€‹ðŸ‡¨â€‹âœ â¦‚
    â€‹ðŸ‡µâ€‹â€‹ðŸ‡·â€‹â€‹ðŸ‡ªâ€‹â€‹ðŸ‡¸â€‹â€‹ðŸ‡¸â€‹ â€‹ðŸ‡ªâ€‹â€‹ðŸ‡¸â€‹â€‹ðŸ‡¨â€‹ â€‹ðŸ‡¹â€‹â€‹ðŸ‡´â€‹ â€‹ðŸ‡ªâ€‹â€‹ðŸ‡½â€‹â€‹ðŸ‡®â€‹â€‹ðŸ‡¹ â€‹â¦‚
)" << endl;
}

void gamestart(int a){
    int k = -1,score = 0;
    bool game_over = false;
    cout << "\033[1;93m"; 
    cout << R"(ð™‹ð™ð™€ð™Žð™Ž ð™ ð™ð™Š ð™Žð™€ð™€ ð™ð™ð™ð™Šð™ð™„ð˜¼ð™‡ð™Ž ð˜¼ð™‰ð˜¿ ð™ð™ð™‡ð™€ð™Ž:)" << endl;
    cout << R"(ð™‹ð™ð™€ð™Žð™Ž ð˜¾ ð™ð™Š ð˜¾ð™Šð™‰ð™ð™„ð™‰ð™ð™€ ð™ð™ƒð™€ ð™‚ð˜¼ð™ˆð™€:)" << endl;
    cout << R"(ð™‹ð™ð™€ð™Žð™Ž ð™€ð™Žð˜¾ ð™ð™Š ð™€ð™“ð™„ð™)" << endl;
     cout << "\033[0m\n";
    while(1)
    {
        if(kbhit())
        {
            char ch=getch();
            switch(ch)
            {
                case 't' : {tutorial();}
            }
            if(ch==27) exit(0);
            if(ch=='c') 
            {
                system("cls");
                break;
                }
        }
    }
    int p;
    cout << "â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œ" << endl; 
    cout << "â¬œ  CHOOSE A COLOUR FOR SNAKE â¬œ" << endl;
    cout << "â¬œ      CLICK 1 FOR : ðŸŸ©      â¬œ" << endl;
    cout << "â¬œ      CLICK 2 FOR : ðŸŸ¦      â¬œ" << endl;
    cout << "â¬œ      CLICK 3 FOR : ðŸŸ¨      â¬œ" << endl;
    cout << "â¬œ      CLICK 4 FOR : ðŸŸ§      â¬œ" << endl;
    cout << "â¬œ      CLICK 5 FOR : ðŸŸª      â¬œ" << endl;
    cout << "â¬œ      CLICK 6 FOR : ðŸŸ¥      â¬œ" << endl;
    cout << "â¬œ                            â¬œ" << endl;
    cout << "â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œ" << endl; 
    cout << "ENTER THE NUMBER:";
    cin >> p;
    system("cls");
    cout << "\033[1;36m"; 
     cout <<"\t\t\t\t"<< R"(
    â–ˆâ–‘â–‘ â–ˆâ–€â–€ â–€â–ˆâ–€ â€ƒ  â–ˆâ–€ â€ƒ â–ˆâ–„â–„ â–ˆâ–€â–€ â–ˆâ–€â–€ â–ˆ â–ˆâ–„â–‘â–ˆ
    â–ˆâ–„â–„ â–ˆâ–ˆâ–„ â–‘â–ˆâ–‘ â€ƒ  â–„â–ˆ â€ƒ â–ˆâ–„â–ˆ â–ˆâ–ˆâ–„ â–ˆâ–„â–ˆ â–ˆ â–ˆâ–‘â–€â–ˆ
    )";
    cout <<"\t"<< R"(
     ðð‘ð„ð’ð’ ð„ðð“ð„ð‘ ð“ðŽ ðð„ð†ðˆð ð“ð‡ð„ ð†ð€ðŒð„ )";
    cout << "\033[0m\n";
    while(1)
    {
        if(kbhit())
        {
             char ch = getch();
            if( ch==13 || ch==10 ) break;
        }
    }
    system("cls");
     while (!game_over) {
        srand(time(NULL));
        Sleep(a);
        if (k == -1) {
            system("cls");
            k = 0;
        }
        cout << endl << endl;
        Grid G(LENGTH, WIDTH, p);
        cout << endl;
        cout << "SCORE: " << score;
        while(_kbhit()) {
            switch (_getch()) {
                case 'w': s.change_dir('w'); break;
                case 'a': s.change_dir('a'); break;
                case 's': s.change_dir('s'); break;
                case 'd': s.change_dir('d'); break;
                case 72: s.change_dir('w'); break;
                case 80: s.change_dir('s'); break;
                case 75: s.change_dir('a'); break;
                case 77: s.change_dir('d'); break;
            }
        }
        s.move_snake();
        if (s.collided()) {
            game_over = true;
            s.set_pos(LENGTH/2,WIDTH/2);
            s.change_dir('\0');
        }
        if (s.eaten(f.get_pos())) {
            int value=f.scores[f.K];
            score += value;
            while(value>0)
            {
                s.grow();
                value-=10;
            }
            int j=f.gen_food();
        }
        SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), {2, 0});
    }
    system("cls");
    cout << "\033[1;91m"; 
    cout <<"\t\t\t"<< R"(
      â–ˆâ–€â–€ â–„â–€â–ˆ â–ˆâ–€â–„â–€â–ˆ â–ˆâ–€â–€ â€ƒ â–ˆâ–€â–ˆ â–ˆâ–‘â–ˆ â–ˆâ–€â–€ â–ˆâ–€â–ˆ   
      â–ˆâ–„â–ˆ â–ˆâ–€â–ˆ â–ˆâ–‘â–€â–‘â–ˆ â–ˆâ–ˆâ–„ â€ƒ â–ˆâ–„â–ˆ â–€â–„â–€ â–ˆâ–ˆâ–„ â–ˆâ–€â–„      
    )";
    cout<<endl;
    cout <<"\t"<< "ð…ðˆðð€ð‹ ð’ð‚ðŽð‘ð„:" << score << endl;
    cout << "\033[0m\n";
    cout << "\033[1;93m"; 
    cout<<R"(ðð‘ð„ð’ð’ 'ð‘' ð…ðŽð‘ ð‘ð„ð’ð“ð€ð‘ð“ )"<<endl;
    cout<<R"( ðð‘ð„ð’ð’ 'ð„' ð…ðŽð‘ ð„ð—ðˆð“:)";
    cout << "\033[0m\n";

    while(1)
    {
        if(kbhit())
        {
            char ch = getch();
            switch(ch)
            {
                case 'r' : 
                { system("cls"); gamestart(60);}
                case 'e' : 
                {exit(0);}
            }
        }
    }
}

int main() {
    SetConsoleOutputCP(CP_UTF8);
    hideCursor();
    cout << "\033[1;95m"; 
     cout <<"\t\t\t\t"<< R"(
    â–ˆâ–€ â–ˆâ–„â–‘â–ˆ â–„â–€â–ˆ â–ˆâ–„â–€ â–ˆâ–€â–€ â€ƒ â–ˆâ–€â–€ â–„â–€â–ˆ â–ˆâ–€â–„â–€â–ˆ â–ˆâ–€â–€
    â–„â–ˆ â–ˆâ–‘â–€â–ˆ â–ˆâ–€â–ˆ â–ˆâ–‘â–ˆ â–ˆâ–ˆâ–„ â€ƒ â–ˆâ–„â–ˆ â–ˆâ–€â–ˆ â–ˆâ–‘â–€â–‘â–ˆ â–ˆâ–ˆâ–„
    )";
    cout << "\033[0m\n";
    Sleep(2000);
    system("cls");
    gamestart(60);
    return 0;
}
